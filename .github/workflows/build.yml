name: Build

on: [push]

jobs:
  myjob:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          path: main
      - uses: actions/checkout@v2
        with:
          repository: vitasdk/vdpm
          path: vdpm
      - run: |
          cd $WORKSPACE/vdpm
          ./bootstrap-vitasdk.sh
          export VITASDK=/usr/local/vitasdk
          export PATH=$VITASDK/bin:$PATH
          ./install-all.sh
          cd $WORKSPACE/main
          mkdir build
          cd build
          cmake -DCMAKE_BUILD_TYPE=Release ..;
          make
        env:
          WORKSPACE: ${{ github.workspace }}
